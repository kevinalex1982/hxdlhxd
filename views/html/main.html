<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
    <title>华夏魔兽代练查询系统</title>
    <!-- Fontawesome icon CSS -->
    <link rel="stylesheet" href="vendor/font-awesome-4.7.0/css/font-awesome.min.css" type="text/css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="vendor/bootstrap4alpha/css/bootstrap.css" type="text/css">

    <!-- DataTables Responsive CSS -->
    <link href="vendor/datatables/css/dataTables.bootstrap4.css" rel="stylesheet">
    <link href="vendor/datatables/css/responsive.dataTables.min.css" rel="stylesheet">

    <!-- jvectormap CSS -->
    <link href="vendor/jquery-jvectormap/jquery-jvectormap-2.0.3.css" rel="stylesheet">

    <!-- Adminux CSS -->
    <link rel="stylesheet" href="css/dark_purple_adminux.css" type="text/css">

    <!-- sweetalert-->
    <link rel="stylesheet" href="jscss/sweetalert/sweetalert.css">
</head>
<body class=" rounded menuclose menuclose-right" data-ng-app="myApp">
<header class="navbar-fixed">
    <nav class="navbar navbar-toggleable-md navbar-inverse bg-faded">
        <div class="sidebar-left"><a class="navbar-brand" href="index.html"> <span class="fa fa-trophy"></span> <span
                class="hidden-sm-down">华夏魔兽代练</span> </a>
            <button class="btn btn-link icon-header mr-sm-2 pull-right menu-collapse"><span class="fa fa-bars"></span>
            </button>
        </div>

        <div class="d-flex mr-auto"> &nbsp;</div>
        <ul class="navbar-nav content-right">


        </ul>
        <div class="sidebar-right pull-right " style="margin-right: 30px">
            <ul class="navbar-nav  justify-content-end">

                <li class="v-devider"></li>
                <li class="nav-item active"> <!-- 消息-->
                    <button class="btn btn-link icon-header " data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false"><span class="fa fa-envelope-o"></span> <span
                            class="badge-number bg-success"></span></button>
                    <div class="dropdown-menu message-container">
                        <div class="list-inline">
                            <a href="#" class="media"> <span class="message_userpic"><img class="d-flex mr-3"
                                                                                          src="img/user-header.png"
                                                                                          alt="Generic user image"></span>
                                <div class="media-body">
                                    <h6 class="mt-0 mb-1">团长木人</h6>
                                    你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢
                                </div>
                            </a>
                            <a href="#" class="media"> <span class="message_userpic"><img class="d-flex mr-3"
                                                                                          src="img/user-header.png"
                                                                                          alt="Generic user image"></span>
                                <div class="media-body">
                                    <h6 class="mt-0 mb-1">团长木人</h6>
                                    你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢
                                </div>
                            </a>
                            <a href="#" class="media"> <span class="message_userpic"><img class="d-flex mr-3"
                                                                                          src="img/user-header.png"
                                                                                          alt="Generic user image"></span>
                                <div class="media-body">
                                    <h6 class="mt-0 mb-1">团长木人</h6>
                                    你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢
                                </div>
                            </a>
                            <a href="#" class="media"> <span class="message_userpic"><img class="d-flex mr-3"
                                                                                          src="img/user-header.png"
                                                                                          alt="Generic user image"></span>
                                <div class="media-body">
                                    <h6 class="mt-0 mb-1">团长木人</h6>
                                    你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢你怎么还不开始任务呢
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="v-devider"></li>
                <li class="nav-item"> <!-- 任务-->
                    <button class="btn btn-link icon-header badgeCircle" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false"><span class="fa fa-bell-o"></span><span
                            class="badge-number bg-danger"></span></button>
                    <div class="dropdown-menu message-container">
                        <div class="list-unstyled">
                            <div class="media"><span class="alert-block bg-primary"><span
                                    class="fa fa-bullhorn"></span></span>
                                <div class="media-body"><b>代练任务</b>今日任务尚未完成
                                </div>
                            </div>
                            <div class="media"><span class="alert-block bg-warning"><span
                                    class="fa fa-bell-o"></span></span>
                                <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit
                                    amet
                                    nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.
                                </div>
                            </div>
                            <div class="media"><span class="alert-block bg-danger"><span
                                    class="fa fa-exclamation-triangle"></span></span>
                                <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit
                                    amet
                                    nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.
                                </div>
                            </div>
                            <div class="media">
                                <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit
                                    amet
                                    nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.
                                </div>
                            </div>
                            <div class="media">
                                <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit
                                    amet
                                    nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="v-devider"></li>
                <li class="nav-item "><a class="btn btn-link icon-header menu-collapse-right"><span
                        class="fa fa-podcast"></span> </a></li>
                <li class="v-devider"></li>
                <li><a href="/" class="btn btn-link icon-header"><span class="fa fa-sign-out"></span></a>
                <li class="v-devider"></li>
            </ul>
        </div>
    </nav>
</header>
<div class="sidebar-left">

    <ul class="nav flex-column in" id="side-menu">

        <li class="title-nav">功能列表</li>
        <li class="nav-item "><a class="nav-link active" href="" ui-sref=".dataInfo" id="indexhtmlA"><i
                class="fa fa-database left-icon square"></i>后台管理</a>
        </li>
        <li class="nav-item" id="usernav"><a class="nav-link " href="" ui-sref=".userInfo"><i
                class="fa fa-file-o left-icon square"></i>账号管理</a>
        </li>
        <li class="nav-item " id="gamenav"><a class="nav-link " href="" ui-sref=".gameInfo"><i
                class="fa fa-male left-icon square"></i>游戏管理</a>
        </li>
        <li class="nav-item " id="lognav"><a class="nav-link " href="" ui-sref=".logInfo"><i
                class="fa fa-list left-icon circle"></i>操作日志</a></li>

    </ul>
    <hr>

    <br>
    <br>
</div>
<div class="wrapper-content">


    <div data-ui-view="">
        <div>

        </div>
    </div>


</div>
<div class="sidebar-right">

    <ul class="nav flex-column ">
        <li class="nav-item text-center">
            <div class="progressprofile">
                <div class="progress_profile " data-value="1" data-size="140" data-thickness="4"
                     data-animation-start-value="0" data-reverse="false"></div>
                <div class="user-details">
                    <figure><img src="img/user-header.png" alt="complete profile"></figure>

                    <h5 id="curnick">{{user.nickname}}</h5>
                    <p>{{user.usname}}</p>

                </div>
                <div class="clearfix"></div>
            </div>
            <div class="meeting-subject text-center col ">

                <p id="roleCur"></p>
                <p>注册时间：{{user.regtime}}</p>
                <p> 最后登录：{{user.lasttime}}</p>
                <p> 登录IP：{{user.lastip}}</p>

            </div>
            <div class="nav-link"><a data-toggle='modal' data-target='#changeProfile' id='btnchangeProfile'
                                     class="btn btn-outline-primary btn-round mr-sm-2">修改资料
                <i class="fa fa-chevron-right"></i></a></div>
            <div class="nav-link"><a href="/" class="btn btn-outline-primary btn-round mr-sm-2">退出 <i
                    class="fa fa-chevron-right"></i></a></div>
        </li>
    </ul>
    <hr>
</div>

<!--新增管理员账号modal-->
<div class="modal dark_bg fade" style="margin-top: 150px" id="addManagerModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">新增管理员账号</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label class="form-control-label">登录账号:</label>
                    <input type="text" class="form-control" id="usLoginNameforManager" placeholder="设置后无法修改"
                           onKeyUp="value=value.replace(/[\W]/g,'')">
                    <small id="managerAddHelp1" class="form-text text-muted">英文或者数字，不能为空</small>
                </div>
                <div class="form-group">
                    <label class="form-control-label">用户昵称:</label>
                    <input type="text" class="form-control" id="nickNameforManager">
                    <small id="managerAddHelp2" class="form-text text-muted">可以是中文，不能为空</small>
                </div>

                <div class="form-group ">
                    <label class="sr-only">密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputManagerPSW1" placeholder="密码">
                </div>
                <div id="checkInputManagePSW" class="form-group ">
                    <label class="sr-only">确认密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputManagerPSW2"
                           placeholder="确认密码">
                    <div class="form-control-feedback " id="pswSameWarn">请确认两次输入的密码相同</div>
                    <small id="managerAddHelp3" class="form-text text-muted">两次密码需保持一致</small>
                </div>
            </div>


            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnAddManager">确认</button>
            </div>
        </div>
    </div>
</div>
<!--新增团长账号modal-->
<div class="modal dark_bg fade" style="margin-top: 150px" id="addCaptainModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel1">新增团长账号</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label class="form-control-label">登录账号:</label>
                    <input type="text" class="form-control" id="usLoginNameforCaptain" placeholder="设置后无法修改"
                           onKeyUp="value=value.replace(/[\W]/g,'')">
                    <small id="captainAddHelp1" class="form-text text-muted">英文或者数字，不能为空</small>
                </div>
                <div class="form-group">
                    <label class="form-control-label">用户昵称:</label>
                    <input type="text" class="form-control" id="nickNameforCaptain">
                    <small id="captainAddHelp2" class="form-text text-muted">可以是中文，不能为空</small>
                </div>

                <div class="form-group ">
                    <label class="sr-only">密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputCaptainPSW1" placeholder="密码">
                </div>
                <div id="checkInputCaptainPSW" class="form-group ">
                    <label class="sr-only">确认密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputCaptainPSW2"
                           placeholder="确认密码">
                    <div class="form-control-feedback " id="pswCaptainSameWarn">请确认两次输入的密码相同</div>
                    <small id="captainAddHelp3" class="form-text text-muted">两次密码需保持一致</small>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnAddCaptain">确认</button>
            </div>
        </div>
    </div>
</div>
<!--新增团员账号modal-->
<div class="modal dark_bg fade" style="margin-top: 150px" id="addMemberModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel2">新增团员账号</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label class="form-control-label">登录账号:</label>
                    <input type="text" class="form-control" id="usLoginNameforMember" placeholder="设置后无法修改"
                           onKeyUp="value=value.replace(/[\W]/g,'')">
                    <small id="memberAddHelp1" class="form-text text-muted">英文或者数字，不能为空</small>
                </div>
                <div class="form-group">
                    <label class="form-control-label">用户昵称:</label>
                    <input type="text" class="form-control" id="nickNameforMember">
                    <small id="memberAddHelp2" class="form-text text-muted">可以是中文，不能为空</small>
                </div>

                <div class="form-group ">
                    <label class="sr-only">密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputMemberPSW1" placeholder="密码">
                </div>
                <div id="checkInputMemberPSW" class="form-group ">
                    <label class="sr-only">确认密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputMemberPSW2"
                           placeholder="确认密码">
                    <div class="form-control-feedback " id="pswMemberSameWarn">请确认两次输入的密码相同</div>
                    <small id="memberAddHelp3" class="form-text text-muted">两次密码需保持一致</small>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnAddMember">确认</button>
            </div>
        </div>
    </div>
</div>
<!--修改资料modal-->
<div class="modal dark_bg fade" style="margin-top: 150px" id="changeProfile" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">修改资料</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label class="form-control-label">登录账号:</label>
                    <input type="text" class="form-control" id="usChangeProfile" readonly>

                </div>
                <div class="form-group">
                    <label class="form-control-label">用户昵称:</label>
                    <input type="text" class="form-control" id="nickNameChangeProfile">
                    <small id="ChangeProfileAddHelp2" class="form-text text-muted">可以是中文，不能为空</small>
                </div>

                <div class="form-group " id="ChangeProfilePswBorder1">
                    <label class="sr-only">密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputChangeProfilePSW1"
                           placeholder="密码">
                    <small id="ChangeProfileAddHelp4" class="form-text text-muted">空为不修改</small>
                </div>
                <div id="ChangeProfilePswBorder2" class="form-group ">
                    <label class="sr-only">确认密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputChangeProfilePSW2"
                           placeholder="确认密码">
                    <div class="form-control-feedback " id="pswChangeProfileSameWarn">请确认两次输入的密码相同</div>
                    <small id="ChangeProfileAddHelp5" class="form-text text-muted">空为不修改</small>
                    <small id="ChangeProfileAddHelp3" class="form-text text-muted">两次密码需保持一致</small>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnChangeProfileConfirm">确认</button>
            </div>
        </div>
    </div>
</div>


<!--修改用户modal-->
<div class="modal dark_bg fade" style="margin-top: 150px" id="updataUser" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">修改用户</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label class="form-control-label">登录账号:</label>
                    <input type="text" class="form-control" id="usUserinfoForUpd" readonly>

                </div>
                <div class="form-group">
                    <label class="form-control-label">用户昵称:</label>
                    <input type="text" class="form-control" id="nickNameForUpd">
                    <small id="UserForUpdAddHelp2" class="form-text text-muted">可以是中文，不能为空</small>
                </div>

                <div class="form-group " id="UserForUpdPswBorder1">
                    <label class="sr-only">密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputUserForUpdPSW1"
                           placeholder="密码">
                    <small id="UserForUpdAddHelp4" class="form-text text-muted">空为不修改</small>
                </div>
                <div id="UserForUpdPswBorder2" class="form-group ">
                    <label class="sr-only">确认密码</label>
                    <input type="password" class="form-control inputManagerPSW" id="inputUserForUpdPSW2"
                           placeholder="确认密码">
                    <div class="form-control-feedback " id="pswUserForUpdSameWarn">请确认两次输入的密码相同</div>
                    <small id="UserForUpdAddHelp5" class="form-text text-muted">空为不修改</small>
                    <small id="UserForUpdAddHelp3" class="form-text text-muted">两次密码需保持一致</small>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnUserForUpdConfirm">确认</button>
            </div>
        </div>
    </div>
</div>


<!--新增游戏modal-->
<div class="modal dark_bg fade" style="margin-top: 150px" id="addGameModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="GameModalLabel">新增游戏</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label class="form-control-label">分配用户:</label>
                    <select class="form-control" id="userFormGameSelect">
                        <option value="">--请选择用户--</option>
                        <optgroup label="团长" id="optGCaptain">


                        </optgroup>
                        <optgroup label="团员" id="optGMember">


                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-control-label">游戏昵称:</label>
                    <input type="text" class="form-control" id="nickGameName">
                    <small  class="form-text text-muted">不能为空</small>
                </div>
                <div class="form-group">
                    <label class="form-control-label">游戏信息:</label>
                    <input type="text" class="form-control" id="gameInfo">
                    <small  class="form-text text-muted">不能为空</small>
                </div>
                <div class="form-group">
                    <label class="form-control-label">淘宝订单号:</label>
                    <input type="text" class="form-control" id="ttddhForGame">
                </div>

            </div>


            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnAddGame">确认</button>
            </div>
        </div>
    </div>
</div>

<!-- jQuery first, then Tether, then Bootstrap JS. -->
<script src="js/jquery-2.1.1.min.js" type="text/javascript"></script>
<script src="vendor/bootstrap4alpha/js/tether.min.js"></script>
<script src="vendor/bootstrap4alpha/js/bootstrap.min.js" type="text/javascript"></script>

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script>

<!-- Circular chart progress js -->
<script src="vendor/cicular_progress/circle-progress.min.js" type="text/javascript"></script>


<!-- DataTables JavaScript -->
<script src="vendor/datatables/js/jquery.dataTables.min.js"></script>
<script src="vendor/datatables/js/dataTables.bootstrap4.js"></script>
<script src="vendor/datatables/js/dataTables.responsive.min.js"></script>

<script src="js/angular.js"></script>
<script src="js/angular-ui-router.js"></script>
<script src="js/App.js"></script>
<!-- custome template js -->
<script src="js/adminux.js" type="text/javascript"></script>
<script src="js/dashboard1.js"></script>
<script src="js/md5.js"></script>
<script src="js/normalKV.js"></script>
<script src="jscss/sweetalert/sweetalert-dev.js"></script>
<script src="js/main.js"></script>
<script>
    var curuser;
    var currole;
    var curuserid;
    var curusernickname;
    var loginUser;
    $(document).ready(function () {
        curuser = '{{user.usname}}';
        currole = '{{user.role}}';
        curuserid = '{{user.id}}';
        curusernickname = '{{user.nickname}}';
        loginUser={userid:curuserid,username:curuser,nickname:curusernickname};
        if (currole == '1') {
            $("#roleCur").text('管理员')
            /*点击确认进行管理员账号添加*/
            $("#btnAddManager").on('click', function () {

                var checkgroup = ['usLoginNameforManager', 'nickNameforManager', 'inputManagerPSW1', 'inputManagerPSW2'];
                //console.log(checkInputEmpty(checkgroup));
                if (checkInputEmpty(checkgroup) == 0) {
                    swal("非法输入", "不能输入空值!", "error");
                    return;
                }
                if (checkManagerPSWSame() == false) {
                    swal("密码错误", "两次输入的密码不匹配!", "error");
                    return;
                }

                var jsonToAdd = {
                    usloginname: $("#usLoginNameforManager").val(),
                    usnickname: $("#nickNameforManager").val(),
                    usloginpsw: hex_md5($("#inputManagerPSW1").val()),
                    curuser:loginUser
                };

                $.post("/dldata/addAdmin", jsonToAdd, function (result) {
                    if (result == 'error') {
                        swal("操作失败", "数据库操作失败，请检查网络，或联系维护人员!", "error");
                    }
                    else {
                        console.log(result);
                        tablesmanager.row.add(result).draw();
                        $('#addManagerModal').modal('hide')
                        swal("操作成功!", "添加管理员成功!", "success");
                    }
                });


            })
            /*点击确认进行团长账号添加*/
            $("#btnAddCaptain").on('click', function () {

                var checkgroup = ['usLoginNameforCaptain', 'nickNameforCaptain', 'inputCaptainPSW1', 'inputCaptainPSW2'];
                //console.log(checkInputEmpty(checkgroup));
                if (checkInputEmpty(checkgroup) == 0) {
                    swal("非法输入", "不能输入空值!", "error");
                    return;
                }
                if (checkCaptainPSWSame() == false) {
                    swal("密码错误", "两次输入的密码不匹配!", "error");
                    return;
                }

                var jsonToAdd = {
                    usloginname: $("#usLoginNameforCaptain").val(),
                    usnickname: $("#nickNameforCaptain").val(),
                    usloginpsw: hex_md5($("#inputCaptainPSW1").val()),
                    curuser:loginUser
                };

                $.post("/dldata/addCaptain", jsonToAdd, function (result) {
                    if (result == 'error') {
                        swal("操作失败", "数据库操作失败，请检查网络，或联系维护人员!", "error");
                    }
                    else {
                        console.log(result);
                        tablescaptain.row.add(result).draw();
                        $('#addCaptainModal').modal('hide')
                        swal("操作成功!", "添加团长成功!", "success");
                    }
                });


            })

            /*点击确认进行团员账号添加*/
            $("#btnAddMember").on('click', function () {

                var checkgroup = ['usLoginNameforMember', 'nickNameforMember', 'inputMemberPSW1', 'inputMemberPSW2'];
                //console.log(checkInputEmpty(checkgroup));
                if (checkInputEmpty(checkgroup) == 0) {
                    swal("非法输入", "不能输入空值!", "error");
                    return;
                }
                if (checkMemberPSWSame() == false) {
                    swal("密码错误", "两次输入的密码不匹配!", "error");
                    return;
                }

                var jsonToAdd = {
                    usloginname: $("#usLoginNameforMember").val(),
                    usnickname: $("#nickNameforMember").val(),
                    usloginpsw: hex_md5($("#inputMemberPSW1").val()),
                    curuser:loginUser
                };

                $.post("/dldata/addMember", jsonToAdd, function (result) {
                    if (result == 'error') {
                        swal("操作失败", "数据库操作失败，请检查网络，或联系维护人员!", "error");
                    }
                    else {
                        console.log(result);
                        tablesmember.row.add(result).draw();
                        $('#addMemberModal').modal('hide')
                        swal("操作成功!", "添加团员成功!", "success");
                    }
                });


            })

            /*点击确认进行游戏添加*/
            $("#btnAddGame").on('click', function () {
                console.log($("#userFormGameSelect").find("option:selected").text());
                console.log($("#userFormGameSelect").val());
                  var checkgroup = ['nickGameName', 'gameInfo'];
                  //console.log(checkInputEmpty(checkgroup));
                  if (checkInputEmpty(checkgroup) == 0) {
                      swal("非法输入", "不能输入空值!", "error");
                      return;
                  }

                  var jsonToAdd = {
                      usID:$("#userFormGameSelect").val(),
                      nickname:$("#userFormGameSelect").val()==null?'未分配':$("#userFormGameSelect").find("option:selected").text(),
                      gameNickName: $("#nickGameName").val(),
                      gameInfo: hex_md5($("#gameInfo").val()),
                      gamettddh:$("#ttddhForGame").val(),
                      curuser:loginUser
                  };

                  $.post("/dldata/addGame", jsonToAdd, function (result) {
                      if (result == 'error') {
                          swal("操作失败", "数据库操作失败，请检查网络，或联系维护人员!", "error");
                      }
                      else {
                          console.log(result);
                          tablesgame.row.add(result).draw();
                          $('#addGameModal').modal('hide')
                          swal("操作成功!", "添加游戏成功!", "success");
                      }
                  });


            })



        }
        else if (currole == '2') {
            $("#roleCur").text('团长');
        }
        else if (currole == '3') {
            $("#roleCur").text('团员');
            $("#usernav").attr("hidden", "");
            $("#gamenav").attr("hidden", "");
            $("#lognav").attr("hidden", "");
        }

        /*弹出修改资料窗口*/
        $("#btnchangeProfile").on('click', function () {
            $("#usChangeProfile").val(curuser);
            $("#nickNameChangeProfile").val(curusernickname);
            $("#inputChangeProfilePSW1").val("");
            $("#inputChangeProfilePSW2").val("");

        })

        /*修改资料窗口的确认按钮*/
        $("#btnChangeProfileConfirm").on('click', function () {

            var checkgroup = ['nickNameChangeProfile'];
            if (checkInputEmpty(checkgroup) == 0) {
                swal("非法输入", "不能输入空值!", "error");
                return;
            }

            if (checkPSWSame('inputChangeProfilePSW1', 'inputChangeProfilePSW2', 'pswChangeProfileSameWarn') == false) {
                swal("密码错误", "两次输入的密码不匹配!", "error");
                return;
            }

            console.log($("#inputChangeProfilePSW1").val() == "");
            var jsonToUpd = {
                usID: curuserid,
                usnickname: $("#nickNameChangeProfile").val(),
                usloginpsw: $("#inputChangeProfilePSW1").val() == "" ? "" : hex_md5($("#inputChangeProfilePSW1").val()),
                curuser:loginUser
            };

            curusernickname = $("#nickNameChangeProfile").val();
            $.post("/dldata/updUser", jsonToUpd, function (result) {
                if (result == 'error') {
                    swal("操作失败", "数据库操作失败，请检查网络，或联系维护人员!", "error");
                }
                else {

                    $("#curnick").text(curusernickname);
                    $('#changeProfile').modal('hide')
                    swal("操作成功!", "修改资料成功!", "success");
                }
            });


            $("#usChangeProfile").val(curuser);
            $("#nickNameChangeProfile").val(curusernickname);
            $("#inputChangeProfilePSW1").val("");
            $("#inputChangeProfilePSW2").val("");


        })

        /*修改用户窗口的确认按钮*/
        $("#btnUserForUpdConfirm").on('click', function () {

            var checkgroup = ['nickNameForUpd'];
            if (checkInputEmpty(checkgroup) == 0) {
                swal("非法输入", "不能输入空值!", "error");
                return;
            }

            if (checkPSWSame('inputUserForUpdPSW1', 'inputUserForUpdPSW2', 'pswUserForUpdSameWarn') == false) {
                swal("密码错误", "两次输入的密码不匹配!", "error");
                return;
            }

            console.log($("#inputUserForUpdPSW1").val() == "");
            var jsonToUpd = {
                usID: userIDforUpd,
                usnickname: $("#nickNameForUpd").val(),
                usloginpsw: $("#inputUserForUpdPSW1").val() == "" ? "" : hex_md5($("#inputUserForUpdPSW1").val()),
                curuser:loginUser
            };


            $.post("/dldata/updUser", jsonToUpd, function (result) {
                if (result == 'error') {
                    swal("操作失败", "数据库操作失败，请检查网络，或联系维护人员!", "error");
                }
                else {
                    curtableForUpd.ajax.reload();
                    $('#updataUser').modal('hide')
                    swal("操作成功!", "修改用户成功!", "success");
                }
            });


        })
    })
</script>
</body>
</html>